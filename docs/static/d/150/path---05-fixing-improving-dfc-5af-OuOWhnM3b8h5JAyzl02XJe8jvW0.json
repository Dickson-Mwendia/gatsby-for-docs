{"data":{"site":{"siteMetadata":{"title":"Gatsby gitbook tutorial","docsLocation":"https://github.com/joolfe/gatsby-for-docs/tree/master/content"}},"mdx":{"fields":{"id":"960e87dd-2735-5400-8f36-6d602131a2dd","title":"Improvements and adjustments","slug":"/05-fixing-improving"},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Improvements and adjustments\",\n  \"metaTitle\": \"Improvements and adjustments\",\n  \"metaDescription\": \"Steps for fix and improve the gatsby site\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Fixing the navegation\"), mdx(\"p\", null, \"The first thing that you will notice when test or recently deployed web (wow \\uD83C\\uDF89), is that navigation didn't work, if you click in any link on the left menu you will get this page:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/gatsby-for-docs/static/9cfb62fdea2de331e0a2513126c010f2/a5044/404-in-git.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"690px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"61.59420289855072%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"alt\": \"page 404 in git\",\n    \"title\": \"\",\n    \"src\": \"/gatsby-for-docs/static/9cfb62fdea2de331e0a2513126c010f2/17fa4/404-in-git.png\",\n    \"srcSet\": [\"/gatsby-for-docs/static/9cfb62fdea2de331e0a2513126c010f2/f4a45/404-in-git.png 259w\", \"/gatsby-for-docs/static/9cfb62fdea2de331e0a2513126c010f2/ef0f6/404-in-git.png 518w\", \"/gatsby-for-docs/static/9cfb62fdea2de331e0a2513126c010f2/17fa4/404-in-git.png 1035w\", \"/gatsby-for-docs/static/9cfb62fdea2de331e0a2513126c010f2/a5044/404-in-git.png 1380w\"],\n    \"sizes\": \"(max-width: 690px) 100vw, 690px\"\n  })), \"\\n  \"), \"\\n  \")), mdx(\"p\", null, \"It's self explanatory, the links are not correct \\uD83D\\uDE15, but why this happen? When we click in the second links for exmaple we get this in the browser \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://joolfe.github.io/02-setup-environment\"), \" and this page doesn't exist because the are a part missing in the path the repo name \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-for-docs\"), \", so the correct url should be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://joolfe.github.io/gatsby-for-docs/02-setup-environment\"), \".\\nAfter a ligth reading in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/docs/how-gatsby-works-with-github-pages/#github-repository-page\"\n  }), \"documentation\"), \" we found that need to set up an the property \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pathPrefix\"), \" in config, to say gatbsy that we are not deployed in the root path of the domain.\"), mdx(\"p\", null, \"So just go to the file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config.js\"), \" and update the property with value \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-for-docs\"), \", build again, publish and done \\uD83D\\uDCAA.\"), mdx(\"h1\", null, \"Images\"), mdx(\"p\", null, \"Other problem that we can see at a glance is that images are not being loaded in our tutorial \\uD83D\\uDE1E\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/gatsby-for-docs/static/5498c16fe64985a1031ef644006ed41c/eccb6/no-image.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1007px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"49.75173783515392%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"alt\": \"image not load\",\n    \"title\": \"\",\n    \"src\": \"/gatsby-for-docs/static/5498c16fe64985a1031ef644006ed41c/17fa4/no-image.png\",\n    \"srcSet\": [\"/gatsby-for-docs/static/5498c16fe64985a1031ef644006ed41c/f4a45/no-image.png 259w\", \"/gatsby-for-docs/static/5498c16fe64985a1031ef644006ed41c/ef0f6/no-image.png 518w\", \"/gatsby-for-docs/static/5498c16fe64985a1031ef644006ed41c/17fa4/no-image.png 1035w\", \"/gatsby-for-docs/static/5498c16fe64985a1031ef644006ed41c/d6f0c/no-image.png 1553w\", \"/gatsby-for-docs/static/5498c16fe64985a1031ef644006ed41c/eccb6/no-image.png 2014w\"],\n    \"sizes\": \"(max-width: 1007px) 100vw, 1007px\"\n  })), \"\\n  \"), \"\\n  \")), mdx(\"p\", null, \"If we test in local in the develop server we can see that images are not loaded \\uD83D\\uDE2E, so should be the way that we are referencing images or where images are located.\"), mdx(\"p\", null, \"Right now we have images in a folder called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/doc-img\"), \" in root project level and we are referencing images from markdown using this code \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"![image not load](../doc-img/no-image.png)\"), \".\"), mdx(\"p\", null, \"I have found nothing related with images in the  \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/starters/hasura/gatsby-gitbook-starter/\"\n  }), \"gatsby-gitbook-starter\"), \" git repo or docs but to make builder understand that should take the images i think we should put inside the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/content\"), \" folder, here is where we are putting all our static content \\uD83D\\uDE1A. \"), mdx(\"p\", null, \"So we move our images to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/content/doc-img/\"), \" folder and in our markdown we are going to reference images as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"![image not load](./doc-img/no-image.png)\"), \" (we just remove a point \\uD83D\\uDE09). \"), mdx(\"p\", null, \"Now we should test in local so:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"$ gatsby develop\\n\")), mdx(\"p\", null, \"and when we go to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://http://localhost:8000\"), \" we can confirm that images are being loaded, awesome!!\"), mdx(\"p\", null, \"Now just build, push and done \\uD83D\\uDC4C!\"), mdx(\"h1\", null, \"Complete the metainformation\"), mdx(\"p\", null, \"If we open \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config.js\"), \" file we can see that there are lot of parameters that should be configured like\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"title\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"githubUrl\"), \", so this step is very easy just complete the info related with our site, as result we will have this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"const config = {\\n    \\\"gatsby\\\": {\\n        \\\"pathPrefix\\\": \\\"/gatsby-for-docs/\\\",\\n        \\\"siteUrl\\\": \\\"https://joolfe.github.io\\\",\\n        \\\"gaTrackingId\\\": null\\n    },\\n    \\\"header\\\": {\\n        \\\"logo\\\": \\\"https://graphql-engine-cdn.hasura.io/img/hasura_icon_white.svg\\\",\\n        \\\"title\\\": \\\"Gatsby gitbook tutorial\\\",\\n        \\\"githubUrl\\\": \\\"https://github.com/joolfe/gatsby-for-docs\\\",\\n        \\\"helpUrl\\\": \\\"\\\",\\n        \\\"tweetText\\\": \\\"\\\",\\n        \\\"links\\\": [{ \\\"text\\\": \\\"\\\", \\\"link\\\": \\\"\\\"}],\\n    },\\n    \\\"sidebar\\\": {\\n        \\\"forcedNavOrder\\\": [],\\n        \\\"links\\\": [{ \\\"text\\\": \\\"\\\", \\\"link\\\": \\\"\\\"}]\\n    },\\n    \\\"siteMetadata\\\": {\\n        \\\"title\\\": \\\"Gatsby gitbook tutorial\\\",\\n        \\\"description\\\": \\\"Step by step tutorial about how to use gatsby to create a gitbook doc.\\\",\\n        \\\"ogImage\\\": null,\\n        \\\"docsLocation\\\": \\\"https://github.com/joolfe/gatsby-for-docs/tree/master/content\\\",\\n        \\\"favicon\\\": \\\"https://graphql-engine-cdn.hasura.io/img/hasura_icon_black.svg\\\"\\n    },\\n};\\n\\nmodule.exports = config;\\n\")), mdx(\"p\", null, \"\\uD83D\\uDC49 We will change the logo url soon...\"), mdx(\"h1\", null, \"Build command is failling...\"), mdx(\"p\", null, \"We have add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mv\"), \" command in build script but after a couple of executions we get this error:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"mv: rename public/static to docs/static: Directory not empty\\n\")), mdx(\"p\", null, \"An easy one... we are moving things without remove the previous files so we get this error \\uD83D\\uDE22, to solve this we just need to add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rm\"), \" command before move, so in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \"script section we change for this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"  \\\"scripts\\\": {\\n    \\\"build\\\": \\\"gatsby build --prefix-paths; rm -rf docs/*; mv public/* docs/\\\"\\n  },\\n\")), mdx(\"p\", null, \"Thats all folks \\uD83D\\uDC37!\"), mdx(\"h1\", null, \"Urls\"), mdx(\"p\", null, \"The url of our page are not pretty.\"), mdx(\"h1\", null, \"Right index\"), mdx(\"p\", null, \"Only first level is showed not sure if we should change for put second level also??\"), mdx(\"h1\", null, \"Index page\"), mdx(\"p\", null, \"We are not filling this mdx page \"));\n}\nMDXContent.isMDXComponent = true;"},"tableOfContents":{"items":[{"url":"#fixing-the-navegation","title":"Fixing the navegation"},{"url":"#images","title":"Images"},{"url":"#complete-the-metainformation","title":"Complete the metainformation"},{"url":"#build-command-is-failling","title":"Build command is failling..."},{"url":"#urls","title":"Urls"},{"url":"#right-index","title":"Right index"},{"url":"#index-page","title":"Index page"}]},"parent":{"__typename":"File","relativePath":"05-fixing-improving.md"},"frontmatter":{"metaTitle":"Improvements and adjustments","metaDescription":"Steps for fix and improve the gatsby site"}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/01-introduction","title":"Introduction"}}},{"node":{"fields":{"slug":"/02-setup-environment","title":"Set up environment"}}},{"node":{"fields":{"slug":"/04-publishing-content","title":"Publishing our content"}}},{"node":{"fields":{"slug":"/03-new-project","title":"Creating our new project"}}},{"node":{"fields":{"slug":"/06-changing-style","title":"Changing the style"}}},{"node":{"fields":{"slug":"/","title":"Introduction"}}},{"node":{"fields":{"slug":"/05-fixing-improving","title":"Improvements and adjustments"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"960e87dd-2735-5400-8f36-6d602131a2dd"}}